# Connexion SSH au Shutle

> Connexion entre shutle (mini ordi Debian) et mac via ethernet uniquement (pas d'internet)

## Prérequis

1. Branchements doivent être bons (pas d’ethernet débranché)
2. Activer le port réseau
   1. Vérifier laquelle des carte est utilisée via `ip a`
   2. Activer le port ethernet lié via `nmtui` (network-manager doit être installé)
3. Configurer le hostname via nmtui

## Configuration SSH

Le SSH permet de se connecter à distance au Shuttle, permettant de le contrôler et de le gérer sans avoir à se déplacer physiquement. Il est essentiel de sécuriser cette connexion pour éviter les accès non autorisés.

La configuration du SSH est trouvable [ici](docs/ssh-configuration.md)

## Réseau local avec le Shuttle

Bien que ce soit facultatif, il est préférable de configurer un accès direct au Shuttle dans le cas où la boxe internet ne fonctionnerait plus.

La configuration de la connexion locale est trouvable [ici](docs/private-net-configuration.md).

## Configuration réseau externe (DNS et Freebox)

### 1. Configuration IP fixe

1. Obtenir une IP fixe :

   - Se connecter sur <https://adsl.free.fr>
   - Aller dans "Ma Freebox"
   - "Demander une adresse IP fixe V4 full-stack"

2. Vérifier l'IP publique :
   - Aller dans "État de la Freebox"
   - Noter l'adresse IPv4 publique

### 2. Redirection des ports

Sur <http://mafreebox.freebox.fr> :

- Rediriger les ports suivants vers l'IP locale du Shuttle :
  - 22 (SSH)
  - 80 (HTTP)
  - 443 (HTTPS)

### 3. Configuration DNS

1. Configuration OVH :

   - Pointer le domaine vers l'IP publique de la Freebox
   - Ajouter l'enregistrement wildcard : `*.<domaine> A <ip_publique>`

2. Optimisation DNS Freebox (pour que la propagation soit plus rapide, à cause du caching DNS de la Freebox) :

   - Aller dans "Paramètres de la Freebox > DHCP > DNS"
   - Ajouter en début de liste :
     1. 8.8.8.8 (Google)
     2. 1.1.1.1 (Cloudflare)

   > Le nom de domaine sera alors directement résolu via Google, sans passer par le système de la boxe qui est inadapté au développement.  
   > Pour vérifier la propagation DNS : utiliser <www.whatsmydns.net>. Il permet de voir la destination en temps réel d'un IP, sans la latence de la mise à jour du cache des DNS intermédiaires.
